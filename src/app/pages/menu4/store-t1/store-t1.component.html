<app-navbar></app-navbar>

<div class="header">
  <p class="text-center"><strong>ชิ้นเนื้อคงคลัง</strong></p>

  <div class="row">
    <div class="form-inline" style="margin-left: 14px">
      <label class="col-form-label"><b> ชนิดซาก/ชิ้นเนื้อ</b></label>
      <div class="dropdown mx-sm-3">
        <button class="dropbtn">
          ซากเนื้อโค (ซ้าย-ขวา) <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content" style="width: 170px">
          <a routerLink="/menu4/store-t2">ซากเนื้อโค (บน-ล่าง)</a>
          <a routerLink="/menu4/store-t3">ซากเนื้อโค (ก้อน)</a>
          <!-- <a routerLink="/menu4/store-t4">ชิ้นเนื้อโค</a> -->
        </div>
      </div>

      <label class="col-form-label"><b>ค้นหาโดย</b></label>
      <div class="input-group form-search mx-sm-4">
        <select class="form-control search-query" (change)="selectMenu(slt)" ngModel="1" #slt>
          <option value="1">รหัสบาร์โค้ดซาก</option>
        </select>
        <input type="text" class="form-control search-query" id="myInput"
          (keyup)="searchTable()" ngModel style="height: 30px"/>
        <div class="input-group-prepend">
          <span class="input-group-text"> <i class="fa fa-search"></i></span>
        </div>
      </div>
    </div>
  </div>
  <!-- <hr> -->

  <div class="row">
    <label class="col-form-label mx-sm-3"><b>ประเภทซาก</b></label>
    <div class="form-inline col-sm-2">
      <div class="input-group form-search ml-auto">
        <select class="form-control search-query" (change)="filter_1(t1)" ngModel="ทั้งหมด" #t1>
          <option value="ทั้งหมด">ทั้งหมด</option>
          <option value="ซากซ้าย">ซากซ้าย</option>
          <option value="ซากขวา">ซากขวา</option>
        </select>
      </div>
    </div>
    <label class="col-form-label mx-sm-2"><b>อายุ (วัน)</b></label>
    <div class="form-inline col-sm-2">
      <div class="input-group form-search ml-auto">
        <select class="form-control search-query" (change)="filter_2(t2)" ngModel="ทั้งหมด" #t2>
          <option value="ทั้งหมด">ทั้งหมด</option>
          <option value="1 วัน">1 วัน</option>
          <option value="2 วัน">2 วัน</option>
          <option value="3 วัน">3 วัน</option>
          <option value="4 วัน">4 วัน</option>
          <option value="5 วัน">5 วัน</option>
          <option value="6 วัน">6 วัน</option>
          <option value="7 วัน">7 วัน</option>
          <option value="8 วัน">8 วัน</option>
          <option value="9 วัน">9 วัน</option>
          <option value="10 วัน">10 วัน</option>
          <option value="11 วัน">11 วัน</option>
          <option value="12 วัน">12 วัน</option>
          <option value="13 วัน">13 วัน</option>
          <option value="14 วัน">14 วัน</option>
          <option value="15 วัน">15 วัน</option>
        </select>
      </div>
    </div>
    <label class="col-form-label mx-sm-2"><b>สถานะ</b></label>
    <div class="form-inline col-sm-2">
      <div class="input-group form-search ml-auto">
        <select class="form-control search-query" (change)="filter_3(t3)" ngModel="ทั้งหมด" #t3>
          <option value="ทั้งหมด">ทั้งหมด</option>
          <option value="พร้อมบ่ม">พร้อมบ่ม</option>
          <option value="กำลังบ่ม">กำลังบ่ม</option>
          <option value="พร้อมตัดเกรด">พร้อมตัดเกรด</option>
          <option value="เบิกไปตัดเกรด">เบิกไปตัดเกรด</option>
          <option value="พร้อมตัดแต่งครั้งที่1">พร้อมตัดแต่งครั้งที่1</option>
          <option value="เบิกไปตัดแต่งครั้งที่1">เบิกไปตัดแต่งครั้งที่1</option>
          <option value="เบิกไปจำหน่าย">เบิกไปจำหน่าย</option>
        </select>
      </div>
    </div>
    <label class="col-form-label mx-sm-2"><b>ระดับเกรด</b></label>
    <div class="form-inline col-sm-2">
      <div class="input-group form-search ml-auto">
        <select class="form-control search-query" (change)="filter_4(t4)" ngModel="ทั้งหมด" #t4>
          <option value="ทั้งหมด">ทั้งหมด</option>
          <option value="-">-</option>
          <option value="2.0">2.0</option>
          <option value="2.5">2.5</option>
          <option value="3.0">3.0</option>
          <option value="3.25">3.25</option>
          <option value="3.5">3.5</option>
          <option value="4.0">4.0</option>
          <option value="4.5">4.5</option>
          <option value="5.0">5.0</option>
        </select>
      </div>
    </div>
  </div>

  <div class="card shadow p" id="aa">
    <div class="card-header">
      <h5><i class="fa fa-table"></i> รายการชิ้นเนื้อคงคลังซากเนื้อโค (ซ้าย-ขวา)</h5>
    </div>
    <div class="card-body">
      <table id="tables">
        <thead>
          <tr>
            <th width="50px">ลำดับ</th>
            <th width="110px">รหัสซาก</th>
            <th width="110px">ประเภทซาก</th>
            <th width="120px">รหัสบาร์โค้ดซาก</th>
            <th width="110px">น้ำหนักอุ่น(กก.)</th>
            <th width="110px">น้ำหนักเย็น(กก.)</th>
            <th width="110px">อายุ(วัน)</th>
            <th width="110px">สถานะ</th>
            <th width="110px">เกรด</th>
            <th width="110px">ราคา(บาท)</th>
            <th>ตัวเลือก</th>  <!-- [hidden]="privilege_id == '2'" -->
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of datas; let i = index">
            <td width="50px">{{ i + 1 }}</td>
            <td width="110px">{{ item.code }}</td>
            <td width="110px">{{ item.type }}</td>
            <td width="120px">{{ item.barcode }}</td>
            <td width="110px">{{ item.weight_w }}</td>
            <td width="110px">{{ item.weight_c }}</td>
            <td width="110px">{{ item.age }}</td>
            <td width="110px">{{ item.status }}</td>
            <td width="110px">{{ item.grade }}</td>
            <td width="110px">{{ item.price }}</td>
            <td>
              <button type="button" class="btn btn-success mx-sm-2" data-toggle="modal" data-target="#modelEdit"
                (click)="editForm(item.key,item.code,item.type,item.barcode,item.weight_w,item.weight_c,
                    item.age,item.status,item.grade,item.price)">
                    <i class="fa fa-pencil-square-o"></i>
              </button>
              <button type="button" class="btn btn-danger" (click)="onDelete(item.key)">
                <i class="fa fa-times"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="text-right ml-auto">
        <h5>
          <strong>จำนวนรายการทั้งหมด {{ count }} รายการ</strong>
        </h5>
      </div>
    </div>
  </div>

  <!-- <div class="card shadow p">
      <div class="card-header">
        <h5><i class="fa fa-table"></i> รายการชิ้นเนื้อคงคลังซากเนื้อโค (ซ้าย-ขวา)</h5>
      </div>
      <div class="card-body">
        <table id="tables">
          <thead>
            <tr>
              <th width="50px">ลำดับ</th>
              <th width="110px">รหัสซาก</th>
              <th width="110px">ประเภทซาก</th>
              <th width="120px">รหัสบาร์โค้ดซาก</th>
              <th width="110px">น้ำหนักอุ่น(กก.)</th>
              <th width="110px">น้ำหนักเย็น(กก.)</th>
              <th width="110px">อายุ(วัน)</th>
              <th width="110px">สถานะ</th>
              <th width="110px">เกรด</th>
              <th width="110px">ราคา(บาท)</th>
              <th>ตัวเลือก</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of datas; let i = index">
              <td width="50px">{{ i + 1 }}</td>
              <td width="110px">{{ item.code }}</td>
              <td width="110px">{{ item.type }}</td>
              <td width="120px">{{ item.barcode }}</td>
              <td width="110px">{{ item.weight_w }}</td>
              <td width="110px">{{ item.weight_c }}</td>
              <td width="110px">{{ item.age }}</td>
              <td width="110px">{{ item.status }}</td>
              <td width="110px">{{ item.grade }}</td>
              <td width="110px">{{ item.price }}</td>
              <td>
                <button type="button" class="btn btn-success mx-sm-2" data-toggle="modal" data-target="#modelEdit"
                  (click)="editForm(item.key,item.code,item.type,item.barcode,item.weight_w,item.weight_c,
                      item.age,item.status,item.grade,item.price)">
                      <i class="fa fa-pencil-square-o"></i>
                </button>
                <button type="button" class="btn btn-danger" (click)="onDelete(item.key)">
                  <i class="fa fa-times"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="text-right ml-auto">
          <h5>
            <strong>จำนวนรายการทั้งหมด {{ count }} รายการ</strong>
          </h5>
        </div>
      </div>
    </div> -->

</div>
<button id="openModalButton" [hidden]="true" data-toggle="modal" data-target="#modelEdit">Open Modal</button>

<!-- Model แก้ไขข้อมูล -->
<div class="modal fade" id="modelEdit" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <form (ngSubmit)="onEdit(items.$key, data)" #data="ngForm">
      <div class="modal-content">
        <div class="modal-header">จัดการข้อมูล</div>
        <div class="modal-body">
          <div class="form-group row" id="hh">
            <label id="ff">รหัสซาก</label>
            <div class="col-sm-7 ml-auto">
              <input type="text" class="form-control" name="code" ngModel="{{items.code}}"/>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">ประเภทซาก</label>
            <div class="col-sm-7 ml-auto">
              <select class="form-control" name="type" ngModel="{{items.type}}">
                <option selected value="ซากซ้าย">ซากซ้าย</option>
                <option value="ซากขวา">ซากขวา</option>
              </select>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">รหัสบาร์โค้ดซาก</label>
            <div class="col-sm-7 ml-auto">
              <input type="text" class="form-control" name="barcode" ngModel="{{items.barcode}}" maxlength="15"/>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">น้ำหนักอุ่น(กก.)</label>
            <div class="col-sm-7 ml-auto">
              <input type="text" class="form-control" name="weight_w" ngModel="{{items.weight_w}}" maxlength="6"/>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">น้ำหนักเย็น(กก.)</label>
            <div class="col-sm-7 ml-auto">
              <input type="text" class="form-control" name="weight_c" ngModel="{{items.weight_c}}" maxlength="6"/>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">อายุ(วัน)</label>
            <div class="col-sm-7 ml-auto">
              <select class="form-control" name="age" ngModel="{{items.age}}">
                <option value="1 วัน">1 วัน</option>
                <option value="2 วัน">2 วัน</option>
                <option value="3 วัน">3 วัน</option>
                <option value="4 วัน">4 วัน</option>
                <option value="5 วัน">5 วัน</option>
                <option value="6 วัน">6 วัน</option>
                <option value="7 วัน">7 วัน</option>
                <option value="8 วัน">8 วัน</option>
                <option value="9 วัน">9 วัน</option>
                <option value="10 วัน">10 วัน</option>
                <option value="11 วัน">11 วัน</option>
                <option value="12 วัน">12 วัน</option>
                <option value="13 วัน">13 วัน</option>
                <option value="14 วัน">14 วัน</option>
                <option value="15 วัน">15 วัน</option>
              </select>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">สถานะ</label>
            <div class="col-sm-7 ml-auto">
              <select class="form-control" name="status" ngModel="{{items.status}}" disabled="{{dis}}">
                <option value="ทั้งหมด">ทั้งหมด</option>
                <option value="พร้อมบ่ม">พร้อมบ่ม</option>
                <option value="กำลังบ่ม">กำลังบ่ม</option>
                <option value="พร้อมตัดเกรด">พร้อมตัดเกรด</option>
                <option value="เบิกไปตัดเกรด">เบิกไปตัดเกรด</option>
                <option value="พร้อมตัดแต่งครั้งที่1">พร้อมตัดแต่งครั้งที่1</option>
                <option value="เบิกไปตัดแต่งครั้งที่1">เบิกไปตัดแต่งครั้งที่1</option>
                <option value="เบิกไปจำหน่าย">เบิกไปจำหน่าย</option>
              </select>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">เกรด</label>
            <div class="col-sm-7 ml-auto">
              <select class="form-control" name="grade" ngModel="{{items.grade}}" disabled="{{dis}}">
                <option value="-">-</option>
                <option value="2.0">2.0</option>
                <option value="2.5">2.5</option>
                <option value="3.0">3.0</option>
                <option value="3.25">3.25</option>
                <option value="3.5">3.5</option>
                <option value="4.0">4.0</option>
                <option value="4.5">4.5</option>
                <option value="5.0">5.0</option>
              </select>
            </div>
          </div>
          <div class="form-group row" id="hh">
            <label id="ff">ราคา(บาท)</label>
            <div class="col-sm-7 ml-auto">
              <input type="text" class="form-control" name="price" ngModel="{{items.price}}" disabled="{{dis}}">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด </button>
            <button type="submit" value="submit" class="btn btn-primary">บันทึกการเปลี่ยนแปลง</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
